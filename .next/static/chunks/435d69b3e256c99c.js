(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,10629,e=>{"use strict";var t=e.i(43476);e.i(50711);var l=e.i(81958),s=e.i(23832),r=e.i(71645);function a(){let{signIn:e}=(0,s.useAuthActions)(),[l,a]=(0,r.useState)("phone"),[n,c]=(0,r.useState)(""),[i,o]=(0,r.useState)(""),[d,u]=(0,r.useState)(""),[x,m]=(0,r.useState)(!1),h=e=>{let t=e.replace(/\D/g,"");return t.length<=3?t:t.length<=6?`${t.slice(0,3)}-${t.slice(3)}`:`${t.slice(0,3)}-${t.slice(3,6)}-${t.slice(6,10)}`},p=e=>{let t=e.replace(/\D/g,"");return t.startsWith("0")?`+972${t.slice(1)}`:t.startsWith("972")?`+${t}`:`+972${t}`},b=async t=>{t.preventDefault(),u(""),m(!0);try{let t=p(n);await e("whatsapp-phone",{phone:t}),a("otp")}catch(e){u("שגיאה בשליחת הקוד. נסה שוב."),console.error(e)}finally{m(!1)}},g=async t=>{t.preventDefault(),u(""),m(!0);try{let t=p(n);await e("whatsapp-phone",{phone:t,code:i})}catch(e){u("קוד שגוי. נסה שוב."),console.error(e)}finally{m(!1)}};return"phone"===l?(0,t.jsxs)("form",{onSubmit:b,className:"w-full max-w-xs space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"מספר טלפון"}),(0,t.jsx)("input",{id:"phone",type:"tel",value:h(n),onChange:e=>c(e.target.value.replace(/\D/g,"")),placeholder:"050-123-4567",className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center",dir:"ltr",autoComplete:"tel",required:!0})]}),d&&(0,t.jsx)("p",{className:"text-red-600 text-sm text-center",children:d}),(0,t.jsx)("button",{type:"submit",disabled:x||n.length<9,className:"w-full py-3 px-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:x?"שולח...":"שלח קוד בוואטסאפ"})]}):(0,t.jsxs)("form",{onSubmit:g,className:"w-full max-w-xs space-y-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-1",children:"קוד אימות"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["נשלח קוד לוואטסאפ שלך (",h(n),")"]}),(0,t.jsx)("input",{id:"otp",type:"text",inputMode:"numeric",value:i,onChange:e=>o(e.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"w-full px-4 py-3 text-2xl tracking-[0.5em] border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center font-mono",dir:"ltr",autoComplete:"one-time-code",required:!0})]}),d&&(0,t.jsx)("p",{className:"text-red-600 text-sm text-center",children:d}),(0,t.jsx)("button",{type:"submit",disabled:x||6!==i.length,className:"w-full py-3 px-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:x?"מאמת...":"כניסה"}),(0,t.jsx)("button",{type:"button",onClick:()=>{a("phone"),o(""),u("")},className:"w-full py-2 text-sm text-gray-600 hover:text-gray-800",children:"שלח קוד חדש"})]})}function n(){let{isAuthenticated:e,isLoading:s}=(0,l.useConvexAuth)();return s?(0,t.jsx)("main",{className:"flex min-h-screen items-center justify-center",children:(0,t.jsx)("div",{className:"animate-pulse text-2xl text-gray-500",children:"טוען..."})}):e?(0,t.jsxs)("main",{className:"min-h-screen p-4",children:[(0,t.jsx)("header",{className:"mb-6",children:(0,t.jsx)("h1",{className:"text-2xl font-bold",children:"לוח ביקורים"})}),(0,t.jsx)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-8 text-center text-gray-500",children:"לוח הביקורים יופיע כאן"})]}):(0,t.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center gap-6 p-4",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("h1",{className:"text-3xl font-bold",children:"לב שרה"}),(0,t.jsx)("p",{className:"text-gray-600 mt-2",children:"תורנות ביקורים אצל אבא"})]}),(0,t.jsx)(a,{})]})}e.s(["default",()=>n],10629)}]);