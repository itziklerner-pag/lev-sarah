module.exports=[50024,a=>{"use strict";var b=a.i(87924);a.i(11241);var c=a.i(77926),d=a.i(59257),e=a.i(72131);function f(){let{signIn:a}=(0,d.useAuthActions)(),[c,f]=(0,e.useState)("phone"),[g,h]=(0,e.useState)(""),[i,j]=(0,e.useState)(""),[k,l]=(0,e.useState)(""),[m,n]=(0,e.useState)(!1),o=a=>{let b=a.replace(/\D/g,"");return b.length<=3?b:b.length<=6?`${b.slice(0,3)}-${b.slice(3)}`:`${b.slice(0,3)}-${b.slice(3,6)}-${b.slice(6,10)}`},p=a=>{let b=a.replace(/\D/g,"");return b.startsWith("0")?`+972${b.slice(1)}`:b.startsWith("972")?`+${b}`:`+972${b}`},q=async b=>{b.preventDefault(),l(""),n(!0);try{let b=p(g);await a("whatsapp-phone",{phone:b}),f("otp")}catch(a){l("שגיאה בשליחת הקוד. נסה שוב."),console.error(a)}finally{n(!1)}},r=async b=>{b.preventDefault(),l(""),n(!0);try{let b=p(g);await a("whatsapp-phone",{phone:b,code:i})}catch(a){l("קוד שגוי. נסה שוב."),console.error(a)}finally{n(!1)}};return"phone"===c?(0,b.jsxs)("form",{onSubmit:q,className:"w-full max-w-xs space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"מספר טלפון"}),(0,b.jsx)("input",{id:"phone",type:"tel",value:o(g),onChange:a=>h(a.target.value.replace(/\D/g,"")),placeholder:"050-123-4567",className:"w-full px-4 py-3 text-lg border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center",dir:"ltr",autoComplete:"tel",required:!0})]}),k&&(0,b.jsx)("p",{className:"text-red-600 text-sm text-center",children:k}),(0,b.jsx)("button",{type:"submit",disabled:m||g.length<9,className:"w-full py-3 px-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:m?"שולח...":"שלח קוד בוואטסאפ"})]}):(0,b.jsxs)("form",{onSubmit:r,className:"w-full max-w-xs space-y-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{htmlFor:"otp",className:"block text-sm font-medium text-gray-700 mb-1",children:"קוד אימות"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mb-2",children:["נשלח קוד לוואטסאפ שלך (",o(g),")"]}),(0,b.jsx)("input",{id:"otp",type:"text",inputMode:"numeric",value:i,onChange:a=>j(a.target.value.replace(/\D/g,"").slice(0,6)),placeholder:"000000",className:"w-full px-4 py-3 text-2xl tracking-[0.5em] border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 text-center font-mono",dir:"ltr",autoComplete:"one-time-code",required:!0})]}),k&&(0,b.jsx)("p",{className:"text-red-600 text-sm text-center",children:k}),(0,b.jsx)("button",{type:"submit",disabled:m||6!==i.length,className:"w-full py-3 px-4 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 disabled:bg-gray-400 disabled:cursor-not-allowed transition-colors",children:m?"מאמת...":"כניסה"}),(0,b.jsx)("button",{type:"button",onClick:()=>{f("phone"),j(""),l("")},className:"w-full py-2 text-sm text-gray-600 hover:text-gray-800",children:"שלח קוד חדש"})]})}function g(){let{isAuthenticated:a,isLoading:d}=(0,c.useConvexAuth)();return d?(0,b.jsx)("main",{className:"flex min-h-screen items-center justify-center",children:(0,b.jsx)("div",{className:"animate-pulse text-2xl text-gray-500",children:"טוען..."})}):a?(0,b.jsxs)("main",{className:"min-h-screen p-4",children:[(0,b.jsx)("header",{className:"mb-6",children:(0,b.jsx)("h1",{className:"text-2xl font-bold",children:"לוח ביקורים"})}),(0,b.jsx)("div",{className:"rounded-lg border border-gray-200 bg-gray-50 p-8 text-center text-gray-500",children:"לוח הביקורים יופיע כאן"})]}):(0,b.jsxs)("main",{className:"flex min-h-screen flex-col items-center justify-center gap-6 p-4",children:[(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("h1",{className:"text-3xl font-bold",children:"לב שרה"}),(0,b.jsx)("p",{className:"text-gray-600 mt-2",children:"תורנות ביקורים אצל אבא"})]}),(0,b.jsx)(f,{})]})}a.s(["default",()=>g],50024)}];

//# sourceMappingURL=src_app_schedule_page_tsx_b5c90efb._.js.map